# Anomaly Detection MLOps Configuration
# Global seed for reproducibility
seed: 42

# Data paths
data:
  base_dir: "/Users/danghyeonsong/HYUE/4-1/final/final_dataset/dataset_type"
  splits_dir: "/Users/danghyeonsong/HYUE/4-1/final/splits"

# Gate model config
gate:
  models:
    effnetb0:
      backbone: "efficientnet_b0"
      input_size: 224
      batch_size: 32
      epochs: 30
      lr: 0.001
      weight_decay: 0.0001
      pos_weight_auto: true
      scheduler: "cosine"
      early_stopping_patience: 7
      calibration: "isotonic"
      freeze_backbone_epochs: 3
    mnv3_large:
      backbone: "mobilenet_v3_large"
      input_size: 224
      batch_size: 32
      epochs: 30
      lr: 0.001
      weight_decay: 0.0001
      pos_weight_auto: true
      scheduler: "cosine"
      early_stopping_patience: 7
      calibration: "isotonic"
      freeze_backbone_epochs: 3

# Heatmap model config
heatmap:
  models:
    patchcore_r18:
      backbone: "resnet18"
      input_size: 224
      coreset_sampling_ratio: 0.10
      num_neighbors: 9
      batch_size: 32
    patchcore_wrn50:
      backbone: "wide_resnet50_2"
      input_size: 224
      coreset_sampling_ratio: 0.10
      num_neighbors: 9
      batch_size: 32

# Cascade thresholds
cascade:
  T_low: 0.3
  T_high: 0.7
  override_quality_low: true
  override_drift_suspected: true
  override_critical_line: true

# Threshold sweep ranges
threshold_sweep:
  T_low_range: [0.1, 0.15, 0.2, 0.25, 0.3, 0.35, 0.4, 0.45, 0.5]
  T_high_range: [0.5, 0.55, 0.6, 0.65, 0.7, 0.75, 0.8, 0.85, 0.9]

# MLflow
mlflow:
  tracking_uri: "mlruns"
  experiment_name: "surface_defect_detection"

# Training
training:
  device: "mps"  # mps | cpu | cuda
  num_workers: 0  # 0 for macOS compatibility
  pin_memory: false
